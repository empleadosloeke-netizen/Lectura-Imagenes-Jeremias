<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Subir imagen</title>

<style>
body { font-family: Arial; max-width: 500px; margin: 40px auto; }
button { width:100%; padding:15px; font-size:18px; }
.msg { margin-top:15px; padding:10px; border-radius:8px; }
.ok { background:#e6ffe6 }
.err { background:#ffe6e6 }
</style>
</head>

<body>

<h2>Subir foto</h2>

<input id="file" type="file" accept="image/jpeg,image/png">
<button onclick="enviar()">Subir</button>

<div id="msg" class="msg" style="display:none"></div>

<script>
const WEBHOOK_URL = "https://thomasloke1.app.n8n.cloud/webhook-test/Subir%20Foto%20Carpeta%20Drive";

function show(t,ok){
  const m=document.getElementById("msg");
  m.style.display="block";
  m.className="msg "+(ok?"ok":"err");
  m.innerHTML=t;
}

function enviar(){
  const f=document.getElementById("file").files[0];
  if(!f){ show("ElegÃ­ imagen",0); return; }

  const r=new FileReader();
  r.onload=async()=>{
    try{
      const res=await fetch(WEBHOOK_URL,{
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body:JSON.stringify({
          fileName:f.name,
          mimeType:f.type,
          base64:r.result
        })
      });

      const txt=await res.text();
      show("OK<br>"+txt,1);

    }catch(e){
      show("Error: "+e,0);
    }
  };
  r.readAsDataURL(f);
}
</script>

</body>
</html>
